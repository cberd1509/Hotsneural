{% extends "MainTemplate.html" %}

{% load static %}

{% block title %} Información Financiera | HOTS {% endblock %}

{% block contenido %}

<style>

.Plot
{
  height: 450px;
}

</style>



<div class="container my-5 pt-5">
  <div class="row">

    <div class="col-md-2"></div>

    <div class="col-md-8">
      <h1 class="text-primary text-center">Resultados | HOTS </h1>
      <p> A continuación, podrá visualizar los resultados generados por el algoritmo. Si desea, puede generar un reporte en .PDF de estos. </p>

      <h2 class="text-secondary text-center"> Gráfica de comportamiento de Producción</h2>
      <canvas id="dailyProd" class="w-100 Plot"> </canvas>
    </div>

    <div class="col-md-2"></div>

  </div>


    <div class="row bg-dark footerrow">
    <div class="col-md-6 align-middle text-center">
            <center><img class="mb-3 " style="width: 90%" src="{% static 'images/LogoWellboreWhite.png' %}"></center>
    </div>
    <div class="col-md-6">
      <p class="text-muted mx-5 text-left">Wellbore Society 2018
        <br>Felipe Consuegra, Carlos Berdugo & Eduardo Muñoz
      <br>Universidad Industrial de Santander</p>
    </div>
  </div>

</div>



<script>

  $(document).ready(function(){

    var Datos = "{{DailyProd}}";
    console.log(Datos);
    Datos = jQuery.parseJSON( Datos );

    DataCumulative = getCumulativeProduction(Datos);

    var chart1 = document.getElementById("dailyProd").getContext('2d');

    var myChart = new Chart(chart1, {
        type: 'line',
        data: {
        labels: ["2018", "2019", "2020", "2021", "2022"],
        datasets: [

            {
              label: "Producción Diaria",
              backgroundColor: 'rgba(255, 97, 0, 0.5)',
              borderColor: 'rgb(255, 97, 0)',
              data: Datos,
              yAxisID: 'first-y-axis'
            },

            {
              label: "Producción Acumulada",
              backgroundColor: 'rgba(33, 43, 61, 0.5)',
              borderColor: 'rgb(33, 43, 61)',
              data: DataCumulative,
              yAxisID:'second-y-axis'
            }

            ]
        },
        
        options: {

              title:{
                display:true,
                text:'Producción Acumulada & Producción Diaria vs Tiempo'
              },
              legend:{
                display:true,
                position:'bottom'

              },
              tooltips:{
                mode:'x',
                intersect:'false',
              },
              scales: {
                  yAxes: [{
                      id: 'first-y-axis',
                      type: 'linear',
                      scaleLabel: {
                        display:true,
                        labelString: 'Producción Diaria [BBL/Día]'
                      }
                  }, {
                      id: 'second-y-axis',
                      type: 'linear',
                      position: 'right',
                      scaleLabel: {
                        display:true,
                        labelString: 'Producción Acumulada [BBL]'
                      }
                  }]
              }
          }
    });

  });


  function getCumulativeProduction(DailyProdArray)
  {
     var CumulativeArray = Array();
     var A = 0;
     for(i=0;i<5;i++)
     {
        YearProd = DailyProdArray[i];
        A = A+YearProd*365;
        CumulativeArray.push(A);
     } 

     return CumulativeArray;
  }

</script>




{% endblock %}